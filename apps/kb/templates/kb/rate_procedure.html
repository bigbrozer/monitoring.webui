{% extends "common/base.html" %}

{%  block extra_css %}
    <link rel="stylesheet" href="{{ STATIC_URL }}kb/css/kb.css">
	<link rel="stylesheet" href="{{ STATIC_URL }}dt-twb/css/dt_bootstrap.css">
{% endblock %}

{%  block extra_scripts %}
	<script src="{{ STATIC_URL }}dt-twb/js/jquery.dataTables.min.js"></script>
	<script src="{{ STATIC_URL }}dt-twb/js/dt_bootstrap.js"></script>
	<script src="{{ STATIC_URL }}kb/js/kb_rating.js"></script>
{% endblock %}

{% block content %}
    <div class="page-header">
        <h1>Procedure rating
            <small>rate quality of a procedure</small>
        </h1>
    </div>

	<div class="row">
		<div class="span8">
			<p>You are about to rate procedures that are written. You are the
				judge.</p>
			<p>Select one or more procedures then choose the rating. You can enter a
				comment too.</p>

			<table id="kb_table" cellpadding="0" cellspacing="0" border="0" class="table table-bordered">
			    <thead>
			        <th><h5>KB Namespaces</h5></th>
			        <th>Comment</th>
			        <th>Rating</th>
			    </thead>
				<tbody>
				{% for kb in procedures %}
					<tr class="kb-row" data-row-id="{{ kb.namespace }}">
						<td><a class="kb-link" href="{% url show_kb kb.namespace %}" target="_blank">{{ kb.namespace }}</a></td>
						<td><small>{{ kb.comment|default_if_none:"No comment" }}</small></td>
					    <td>{{ kb.get_rating_display }}</td>
					</tr>{% endfor %}
				</tbody>
			</table>
		</div>

	    <!-- Rating box / Select buttons -->
		<div class="span4">
			<div data-spy="affix" data-offset-bottom="100">
                <p>
                    <button id="kb-btn-select-all" class="btn btn-mini" type="button">Select All</button>
                    <button id="kb-btn-unselect-all" class="btn btn-mini" type="button">Unselect All</button>
                    <small class="pull-right" id="num_row_selected"></small>
                </p>
                <div class="kb-rating-box well">
                    <h5>Rate</h5>
                    <p id="kb-rating-buttons">
                        <span data-rating="-2" class="label label-important">Bad</span>
                        <span data-rating="-1" class="label label-warning">Average</span>
                        <span data-rating="0" class="label label-success">Good</span>
                        <span data-rating="1" class="label label-excellent">Excellent</span>
                    </p>
                    <h5>Comment <small>(optional)</small></h5>
                    <!--suppress HtmlFormInputWithoutLabel -->
                    <input class="input-xlarge" type="text" id="comment" placeholder="Comment your choice (optional)">
                </div>
			</div>
		</div>
    </div>
{% endblock %}